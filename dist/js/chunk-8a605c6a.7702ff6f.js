(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a605c6a"],{"5a61":function(t,e,a){},"70f7":function(t,e,a){"use strict";var s=a("5a61"),i=a.n(s);i.a},7277:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{staticClass:"container",attrs:{role:"main"}},[a("p",{staticClass:"title"},[t._v("New Production")]),a("div",{staticClass:"my-3 p-3 bg-white rounded box-shadow new-post"},[a("div",{staticClass:"info"},[a("p",[t._v("品項名稱")]),a("el-input",{attrs:{placeholder:"必填"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1),a("div",{staticClass:"info"},[a("p",[t._v("商品價格")]),a("el-input",{attrs:{placeholder:"必填"},model:{value:t.data.price,callback:function(e){t.$set(t.data,"price",e)},expression:"data.price"}})],1),a("div",{staticClass:"info"},[a("p",[t._v("商品單位")]),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"必填"},model:{value:t.data.unit,callback:function(e){t.$set(t.data,"unit",e)},expression:"data.unit"}},t._l(t.units,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("div",{staticClass:"info"},[a("p",[t._v("店家名稱")]),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"必填"},model:{value:t.shop,callback:function(e){t.shop=e},expression:"shop"}},t._l(t.shops,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("div",{staticClass:"info"},[a("p",[t._v("圖片")]),a("input",{ref:"myFiles",attrs:{id:"file-btn",type:"file",name:"pic",accept:"image/*"},on:{change:t.previewFiles}})])]),a("div",{staticClass:"media text-muted pt-3"},[a("button",{staticClass:"btn btn-success",attrs:{id:"post-btn",type:"button"},on:{click:t.submit}},[t._v("Submit")])])])},i=[],o=(a("7514"),a("7f7f"),a("ac6a"),a("f3e2"),{name:"home",data:function(){return{user:{email:"test"},shops:[],units:["包","份","支","條","個","袋","盒","罐","瓶"],shop:"",data:{unit:"",name:"",price:0,img:""},files:[]}},methods:{getShops:function(){var t=this;this.$db.collection("products").get().then(function(e){e.forEach(function(e){t.shops.push(e.data().name)}),console.log(t.shops)})},submit:function(){var t=this,e=this.$db.collection("products");if(this.files.length>0){var a=this.files[0],s=this.$firebase.firestore().ref().child(a.name).put(a);s.on("state_changed",function(t){var e=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+e+"% done"),t.state){case firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case firebase.storage.TaskState.RUNNING:console.log("Upload is running");break}},function(t){console.log(err)},function(){this.data.img=s.snapshot.downloadURL}),this.data.img="@/assets/img/"+this.data.img+"metadata",console.log(this.data.img);var i=this.$firebase.storage().ref(),o=(a=document.getElementById("file-btn").files[0],{contentType:a.type});i.child().put(a,o).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}var n=this.data,l=n.name,c=n.price,r=n.unit,u=(n.img,this.shop),d=[];console.log(this.data,l,c,r,u,""!=l,0!=c,""!=r,""!=u),console.log("yes");var p=this.shops.find(function(t){return t===u});if(p){var f="";e.where("name","==",u).get().then(function(a){a.forEach(function(e){f=e.id,d=e.data().product_list,console.log(e.data(),d),d.push(t.data)}),e.doc(f).update({product_list:d}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})})}else e.doc().set({name:u,product_list:[this.data]})},previewFiles:function(){this.files=this.$refs.myFiles.files,console.log(this.files)}},mounted:function(){this.getShops()}}),n=o,l=(a("70f7"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"47bbb8ee",null);c.options.__file="Dashboard.vue";e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-8a605c6a.7702ff6f.js.map