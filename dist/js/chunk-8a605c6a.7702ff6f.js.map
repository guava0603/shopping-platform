{"version":3,"sources":["webpack:///./src/views/Dashboard.vue?24bf","webpack:///./src/views/Dashboard.vue?f431","webpack:///src/views/Dashboard.vue","webpack:///./src/views/Dashboard.vue?2310","webpack:///./src/views/Dashboard.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Dashboard_vue_vue_type_style_index_0_id_47bbb8ee_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Dashboard_vue_vue_type_style_index_0_id_47bbb8ee_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","role","_v","placeholder","model","value","data","callback","$$v","$set","expression","filterable","allow-create","default-first-option","_l","unit","key","label","shop","ref","id","type","name","accept","on","change","previewFiles","click","submit","staticRenderFns","Dashboardvue_type_script_lang_js_","user","email","shops","units","price","img","files","methods","getShops","_this","$db","collection","get","then","res","forEach","doc","push","console","log","_this2","productCllc","length","_file","uploadTask","$firebase","firestore","child","put","snapshot","progress","bytesTransferred","totalBytes","state","firebase","storage","TaskState","PAUSED","RUNNING","error","err","downloadURL","metadata","document","getElementById","contentType","url","catch","_this$data","list","isShopExist","find","shopInList","where","querySnapshot","product_list","update","set","$refs","myFiles","mounted","views_Dashboardvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-8a605c6a.7702ff6f.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=47bbb8ee&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=style&index=0&id=47bbb8ee&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"container\",attrs:{\"role\":\"main\"}},[_c('p',{staticClass:\"title\"},[_vm._v(\"New Production\")]),_c('div',{staticClass:\"my-3 p-3 bg-white rounded box-shadow new-post\"},[_c('div',{staticClass:\"info\"},[_c('p',[_vm._v(\"品項名稱\")]),_c('el-input',{attrs:{\"placeholder\":\"必填\"},model:{value:(_vm.data.name),callback:function ($$v) {_vm.$set(_vm.data, \"name\", $$v)},expression:\"data.name\"}})],1),_c('div',{staticClass:\"info\"},[_c('p',[_vm._v(\"商品價格\")]),_c('el-input',{attrs:{\"placeholder\":\"必填\"},model:{value:(_vm.data.price),callback:function ($$v) {_vm.$set(_vm.data, \"price\", $$v)},expression:\"data.price\"}})],1),_c('div',{staticClass:\"info\"},[_c('p',[_vm._v(\"商品單位\")]),_c('el-select',{attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"default-first-option\":\"\",\"placeholder\":\"必填\"},model:{value:(_vm.data.unit),callback:function ($$v) {_vm.$set(_vm.data, \"unit\", $$v)},expression:\"data.unit\"}},_vm._l((_vm.units),function(unit){return _c('el-option',{key:unit,attrs:{\"label\":unit,\"value\":unit}})}),1)],1),_c('div',{staticClass:\"info\"},[_c('p',[_vm._v(\"店家名稱\")]),_c('el-select',{attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"default-first-option\":\"\",\"placeholder\":\"必填\"},model:{value:(_vm.shop),callback:function ($$v) {_vm.shop=$$v},expression:\"shop\"}},_vm._l((_vm.shops),function(shop){return _c('el-option',{key:shop,attrs:{\"label\":shop,\"value\":shop}})}),1)],1),_c('div',{staticClass:\"info\"},[_c('p',[_vm._v(\"圖片\")]),_c('input',{ref:\"myFiles\",attrs:{\"id\":\"file-btn\",\"type\":\"file\",\"name\":\"pic\",\"accept\":\"image/*\"},on:{\"change\":_vm.previewFiles}})])]),_c('div',{staticClass:\"media text-muted pt-3\"},[_c('button',{staticClass:\"btn btn-success\",attrs:{\"id\":\"post-btn\",\"type\":\"button\"},on:{\"click\":_vm.submit}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <main role=\"main\" class=\"container\">\n    <p class=\"title\">New Production</p>\n    <div class=\"my-3 p-3 bg-white rounded box-shadow new-post\">\n      <div class=\"info\">\n        <p>品項名稱</p>\n        <el-input v-model=\"data.name\" placeholder=\"必填\"></el-input>\n      </div>\n      <div class=\"info\">\n        <p>商品價格</p>\n        <el-input v-model=\"data.price\" placeholder=\"必填\"></el-input>\n      </div>\n      <div class=\"info\">\n        <p>商品單位</p>\n        <el-select v-model=\"data.unit\" filterable allow-create default-first-option placeholder=\"必填\">\n          <el-option v-for=\"unit in units\" :key=\"unit\" :label=\"unit\" :value=\"unit\"></el-option>\n        </el-select></div>\n      <div class=\"info\">\n        <p>店家名稱</p>\n        <el-select v-model=\"shop\" filterable allow-create default-first-option placeholder=\"必填\">\n          <el-option v-for=\"shop in shops\" :key=\"shop\" :label=\"shop\" :value=\"shop\"></el-option>\n        </el-select>\n      </div>\n      <div class=\"info\">\n        <p>圖片</p>\n        <input id=\"file-btn\" ref=\"myFiles\" type=\"file\" name=\"pic\" accept=\"image/*\" @change=\"previewFiles\">\n      </div>\n    </div>\n    <div class=\"media text-muted pt-3\">\n      <button id=\"post-btn\" type=\"button\" class=\"btn btn-success\" @click=\"submit\">Submit</button>\n    </div>\n  </main>\n</template>\n\n<script>\nexport default {\n  name: 'home',\n  data() {\n    return {\n      user: {\n        email: 'test'\n      },\n      shops: [],\n      units: ['包', '份', '支', '條', '個', '袋', '盒', '罐', '瓶'],\n      shop: '',\n      data: {\n        unit: '',\n        name: '',\n        price: 0,\n        img: ''\n      },\n      files: []\n    }\n  },\n  methods: {\n    getShops() {\n      this.$db.collection('products').get().then(res => {\n        res.forEach(doc => {\n          this.shops.push(doc.data().name);\n        });\n        console.log(this.shops);\n      })\n    },\n    submit() {\n      var productCllc = this.$db.collection('products');\n      if (this.files.length > 0) {\n        var file = this.files[0];\n        var uploadTask = this.$firebase.firestore().ref().child(file.name).put(file);\n        uploadTask.on('state_changed', function(snapshot) {\n          var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log('Upload is ' + progress + '% done');\n          switch (snapshot.state) {\n            case firebase.storage.TaskState.PAUSED: // or 'paused'\n\n              console.log('Upload is paused');\n              break;\n            case firebase.storage.TaskState.RUNNING: // or 'running'\n\n              console.log('Upload is running');\n              break;\n          }\n        }, function(error) {\n          console.log(err);\n        }, function() {\n          this.data.img = uploadTask.snapshot.downloadURL;\n        });\n\n        this.data.img = '@/assets/img/' + this.data.img + 'metadata';\n        console.log(this.data.img);\n        const ref = this.$firebase.storage().ref();\n        const file = document.getElementById(\"file-btn\").files[0];\n        const metadata = { contentType: file.type };\n        const task = ref.child().put(file, metadata).then(url => {\n          console.log(url);\n        }).catch(err => {\n          console.log(err);\n        })\n      }\n\n      var { name, price, unit, img } = this.data;\n      var shop = this.shop;\n      var list = [];\n      console.log(this.data, name, price, unit, shop , name != \"\", price != 0, unit != \"\", shop != \"\");\n\n      // if (name != \"\" && price != 0 && unit != \"\" && shop != \"\") {\n      console.log('yes');\n      var isShopExist = this.shops.find(shopInList => {\n        return shopInList === shop;\n      })\n      \n      if (isShopExist) {\n        var id= '';\n        productCllc.where(\"name\", \"==\", shop).get().then(querySnapshot => {\n          querySnapshot.forEach(doc => {\n            id = doc.id;\n            list = doc.data().product_list;\n            console.log(doc.data(), list);\n            list.push(this.data);\n          })\n          productCllc.doc(id).update({ \"product_list\": list }).then(res => {\n            console.log(res);\n          }).catch(err => {\n            console.log(err);\n          })\n        });\n      } else {\n        productCllc.doc().set({\n          name: shop,\n          product_list: [this.data]\n        });\n      }\n    },\n    previewFiles() {\n      this.files = this.$refs.myFiles.files;\n      console.log(this.files);\n    }\n  },\n  mounted() {\n    this.getShops();\n  }\n}\n</script>\n\n\n<style lang=\"scss\" scoped>\nmain {\n  padding-top: 20px;\n}\n.title {\n  text-align: left;\n  margin: 20px;\n  padding: 10px;\n  font-weight: 900;\n  border-top: 1px solid black;\n  border-bottom: 1px solid black;\n}\n.new-post {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  .info {\n    display: flex;\n    flex-direction: row;\n    padding: 10px;\n    margin-right: 100px;\n    p {\n      width: 100px;\n      text-align: left;\n    }\n    .el-input, .el-select {\n      width: 200px;\n    }\n  }\n}\n#post-btn {\n  margin-left: 20px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=47bbb8ee&scoped=true&\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Dashboard.vue?vue&type=style&index=0&id=47bbb8ee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47bbb8ee\",\n  null\n  \n)\n\ncomponent.options.__file = \"Dashboard.vue\"\nexport default component.exports"],"sourceRoot":""}